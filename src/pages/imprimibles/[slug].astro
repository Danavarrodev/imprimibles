---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";


export async function getStaticPaths() {
  const entries = await getCollection("imprimibles");
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

// Props que recibimos desde getStaticPaths
const { entry } = Astro.props;

const { title, description, cover, pdf, subject, level } = entry.data;
const ogImage = cover ?? "/og.png";
---

<BaseLayout
  title={`${title} | Imprimibles Educativos`}
  description={description}
  ogImage={ogImage}
>
  <article class="prose max-w-2xl mx-auto py-8">
    <h1>{title}</h1>

    {cover && (
      <img src={cover} alt={title} class="w-full rounded-lg" loading="lazy" />
    )}

    <p class="text-slate-600">{description}</p>

    <ul class="mt-4 text-sm text-slate-500">
      <li><strong>Asignatura:</strong> {subject}</li>
      <li><strong>Nivel:</strong> {level}</li>
    </ul>

    {pdf && (
      <a
        href={pdf.startsWith('/') ? pdf : '/' + pdf}  
        class="mt-6 inline-block px-5 py-3 rounded-xl bg-black text-white hover:bg-slate-800 transition"
      >
        Descargar PDF
      </a>
    )}
  </article>
</BaseLayout>
